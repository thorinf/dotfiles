# Dotfiles

Personal dotfiles managed via a Git bare repo with `$HOME` as the work tree. Curated per‑directory `.gitignore` files keep third‑party plugin code out while tracking configs and small custom scripts.

## Setup

```bash
git clone --bare <repo-url> ~/.dotfiles                  # clone bare repo
alias dotfiles='git --git-dir=$HOME/.dotfiles --work-tree=$HOME'
dotfiles checkout                                        # populate tracked files into $HOME
dotfiles config status.showUntrackedFiles no             # hide home-directory noise
# Optional: use a global excludes file
git config --global core.excludesfile "$HOME/.config/git/ignore"
```

Add the alias to your shell config (e.g., `~/.zshrc`). On first run, zinit and TPM will self‑install if missing (network needed once).

## Usage

```bash
dotfiles status                    # show changes
dotfiles add <path>                # stage a file
dotfiles commit -s -m "msg"        # commit with signoff
dotfiles push                      # push to origin
```

## Tracking Policy

- Plugins: do not vendor third‑party plugin code. Rely on managers to install.
- Locks: track pin files for reproducibility (e.g., `~/.config/nvim/lazy-lock.json`).
- Per‑dir ignores: keep generated artifacts out of the repo.
  - `~/.tmux/.gitignore`: ignores `plugins/` (TPM clones).
  - `~/.config/nvim/.gitignore`: ignores `plugin/` and `spell/`.
  - `~/.local/share/.gitignore`: ignores `zinit/` clone.
  - `~/.emacs.d/.gitignore`: ignores `elpa/`, `eln-cache/`, autosaves, and common caches.

If you have your own small Neovim Lua files under `~/.config/nvim/plugin/`, un‑ignore specific files and add them.

## Structure

- `~/.zshrc`: zinit + Powerlevel10k; aliases and completion tweaks.
- `~/.p10k.zsh`: prompt theme (generated by `p10k configure`).
- `~/.config/tmux/tmux.conf`: truecolor, prefix `Ctrl+a`, pane/window binds, OSC 52 copy; TPM.
- `~/.config/ghostty/config`: theme, opacity, split navigation, close surface.
- `~/.config/ruff/ruff.toml`: Python lint/format defaults.
- `~/.config/nvim/**`: lazy.nvim plugin specs, LSP/cmp/treesitter configs, lockfile.
- `~/.emacs.d/init.el`: minimal Emacs with evil + org.

## Shortcuts

### Ghostty
- cmd+Left/Right/Up/Down: move between splits
- cmd+d / cmd+shift+d: split right / split down
- cmd+w: close surface (tab/window)

### Zsh
- Ctrl+p / Ctrl+n: history search backward/forward
- Alt+w: kill region
- Powerlevel10k theme; zinit manages plugins (syntax, completions, autosuggest)

### TMUX
- Prefix: Ctrl+a (send-prefix on Ctrl+a)
- Panes: h/j/k/l or Alt+Arrow; split: `-`/`|` or `"`/`%`; new window: `c`
- Windows: Shift+Left/Right or Alt+h/Alt+l
- Copy mode (vi): `y` copy selection, `Y` copy to EOL (OSC 52 clipboard)
- Display: truecolor enabled (`tmux-256color` + RGB overrides)

### Neovim
- Leader: Space
- Telescope: `<leader>ff` files, `fb` buffers, `fg` live grep, `fh` help, `fn` file browser
- LSP/completion via mason + cmp; treesitter for syntax; which-key/lualine UI

### Emacs
- Focused on Org mode (with evil keybindings); minimal elsewhere
- Org indentation/visual tweaks; evil-org for better navigation

## Notes

- Local‑only ignores: for host‑specific or personal files, use `~/.dotfiles/info/exclude` to ignore without committing patterns.
- Terminfo: `tmux-256color` is preferred; ensure it exists on the host or add a fallback in `tmux.conf`.

## How it Works

A Git bare repository lives at `~/.dotfiles` and treats `$HOME` as the working tree. This tracks selected files without turning your entire home directory into a Git repo.
